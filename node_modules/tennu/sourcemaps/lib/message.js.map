{"version":3,"sources":["/home/havvy/tennu/tennu/src/lib/message.sjs"],"names":["RFCMessage","require","mircColors","util","extensions","join","message","channel","params","toLowerCase","part","reason","kick","kicked","kicker","quit","privmsg","isQuery","indexOf","trim","replace","nickname","notice","nick","old","hostmask","new","mode","modestring","modes","args","slice","split","prefixes","argModes","i","set_mode","length","push","parameter","shift","set","replyname","username","hostname","realname","server","serverInfo","permissions","seconds","since","channels","identifiedas","topic","who","timestamp","Number","hostmaskPattern","setter","nicknames","words","ip","unknownCommand","resource","command","Message","raw","Object","create","parseHostmaskFromPrefix","module","exports"],"mappings":"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","file":"message.js","sourcesContent":["var RFCMessage = require(\"irc-message\");\nvar mircColors = /\\u0003\\d?\\d?,?\\d?\\d?/g;\nvar util = require(\"util\");\n\n// Note(Havvy): All numerics are listed at https://www.alien.net.au/irc/irc2numerics.html\nvar extensions = {\n    join: function (message) {\n        message.channel = message.params[0].toLowerCase();\n    },\n\n    part: function (message) {\n        message.channel = message.params[0].toLowerCase();\n        message.reason = message.params[1];\n    },\n\n    kick: function (message) {\n        message.channel = message.params[0].toLowerCase();\n        message.kicked = message.params[1];\n        message.kicker = message.params[2];\n    },\n\n    quit: function (message) {\n        message.reason = message.params[0];\n    },\n\n    privmsg: function (message) {\n        // Test fails if new channel prefixes are created by IRCds, but that's unlikely.\n        message.isQuery = (\"#!+.~\".indexOf(message.params[0][0]) === -1);\n        message.message = message.params[1].trim().replace(mircColors, \"\");\n\n        if (message.isQuery) {\n            message.channel = message.nickname;\n        } else {\n            message.channel = message.params[0];\n        }\n    },\n\n    notice: function (message) {\n        // Test fails if new channel prefixes are created by IRCds, but that's unlikely.\n        message.isQuery = (\"#!+.~\".indexOf(message.params[0][0]) === -1);\n        message.message = message.params[1].replace(mircColors, \"\").trim();\n\n        if (message.isQuery) {\n            message.channel = message.nickname;\n        } else {\n            message.channel = message.params[0];\n        }\n    },\n\n    nick: function (message) {\n        message.old = message.hostmask.nickname;\n        message.new = message.params[0];\n    },\n\n    mode: function (message) {\n        message.channel = message.params[0]; // Channel or nick\n        message.modestring = message.params[1]; // +asd-asdaf\n        // The IRCd should only send the modestring with the argument modes last.\n        // i.e \"+soh nick nick\" or \"+s-zh+o nick nick\" or \"+pzh-o nick nick\"\n        message.modes = [];\n        var args = message.params.slice(2);\n        var modes = message.modestring.split(\"\");\n        var prefixes = {\"+\":true,\"-\":false};\n        var argModes = { // TODO: Use the \"CHANMODES\" sent by the server on connect to make this dict\n            \"a\": \"nick\",\n            \"b\": \"mask\",\n            \"e\": \"mask\",\n            \"f\": \"lines:second\",\n            \"h\": \"nick\",\n            \"I\": \"mask\",\n            \"J\": \"joins:second\",\n            \"k\": \"key\",\n            \"l\": \"max_users\",\n            \"L\": \"channel\",\n            \"o\": \"nick\",\n            \"O\": \"nick\",\n            \"q\": \"nick\",\n            \"v\": \"nick\"\n        };\n        for (var i = 0, set_mode = true; i < modes.length; i++) {\n            var mode = modes[i];\n            if (mode in prefixes) {\n                set_mode = prefixes[mode];\n            } else if (mode in argModes) {\n                message.modes.push({\n                    mode: mode,\n                    parameter: args.shift(),\n                    set: set_mode\n                });\n            } else {\n                message.modes.push({\n                    mode: mode,\n                    set: set_mode\n                });\n            }\n        }\n    },\n\n    \"307\": function (message) {\n        // :<server> 307 <me> <nick> :is a registered nick\n        // FIXME(Havvy): Only accounts for UnrealIRCd\n        message.replyname = \"RPL_WHOISREGNICK\";\n        message.nickname = message.params[1];\n    },\n\n    \"310\": function (message) {\n        // :<server> 310 <me> <nick> :is available for help.\n        // FIXME(Havvy): Bahumat & AustHex use this numeric for other purposes.\n        \n        // UnrealIRCd Only\n        message.replyname = \"RPL_WHOISHELPOP\";\n    },\n\n    \"311\": function (message) {\n        // :<server> 311 <me> <nick> <username> <hostmask> * <realname>\n        message.replyname = \"RPL_WHOISUSER\";\n        message.nickname = message.params[1];\n        message.username = message.params[2];\n        message.hostname = message.params[3];\n        message.realname = message.params[5];\n        message.hostmask = {\n            nickname: message.params[1],\n            username: message.params[2],\n            hostname: message.params[3]\n        };\n    },\n\n    \"312\": function (message) {\n        // :<server> 312 <me> <nick> <server> :<info>\n        message.replyname = \"RPL_WHOISSERVER\";\n        message.nickname = message.params[1];\n        message.server = message.params[2];\n        message.serverInfo = message.params[3];\n    },\n\n    \"313\": function (message) {\n        // :<server> 313 <me> <nickname> :is a Network Administrator\n        message.replyname = \"RPL_WHOISOPERATOR\";\n        message.nickname = message.params[1];\n        message.permissions = message.params[2];\n    },\n\n    \"317\": function (message) {\n        // :<server> 317 <me> <nick> <seconds> <unixtime> :seconds idle, signon time\n        message.replyname = \"RPL_WHOISIDLE\";\n        message.nickname = message.params[1];\n        message.seconds = message.params[2];\n        message.since = message.params[3];\n    },\n\n    \"318\": function (message) {\n        // :<server> 318 <me> <nick> :End of /WHOIS list.\n        message.replyname = \"RPL_ENDOFWHOIS\";\n        message.nickname = message.params[1];\n    },\n\n    \"319\": function (message) {\n        // :<server> 319 <me> <nickname> :<channels>\n        // channel format:  <power sigil>?<channel sigil><name>\n        message.replyname = \"RPL_WHOISCHANNELS\";\n        message.nickname = message.params[1];\n        message.channels = message.params[2].toLowerCase();\n    },\n\n    \"330\": function (message) {\n        // :<server> 330 <me> <nickname> <ident> :is logged in as\n        // Nonstandard, but used on most IRCds.\n        message.replyname = \"RPL_WHOISLOGGEDIN\";\n        message.nickname = message.params[1];\n        message.identifiedas = message.params[2];\n    },\n\n    \"332\": function (message) {\n        // :<server> 332 <me> <channel> :<topic>\n        message.replyname = \"RPL_TOPIC\";\n        message.channel = message.params[1].toLowerCase();\n        message.topic = message.params[2];\n    },\n\n    \"333\": function (message) {\n        // :<server> 333 <me> <channel> <who> <timestamp>\n        message.replyname = \"RPL_TOPICWHOTIME\";\n        message.channel = message.params[1].toLowerCase();\n        message.who = message.params[2];\n        message.timestamp = Number(message.params[3]);\n    },\n\n    \"335\": function (message) {\n        // :<server> 335 <me> <nickname> :is a Bot on <network name>\n        // UnrealIRCd Only\n        message.replyname = \"RPL_WHOISBOT\";\n    },\n\n    \"346\": function (message) {\n        // :<server> 346 <me> <channel> <hostmaskPattern> <setter> <timestamp>\n        message.replyname = \"RPL_INVITELIST\";\n        message.channel = message.params[1];\n        message.hostmaskPattern = message.params[2];\n        message.setter = message.params[3];\n        message.timestamp = message.params[4];\n    },\n    \n    \"348\": function (message) {\n        // :<server> 348 <me> <channel> <hostmaskPattern> <setter> <timestamp>\n        message.replyname = \"RPL_EXCEPTLIST\";\n        message.channel = message.params[1];\n        message.hostmaskPattern = message.params[2];\n        message.setter = message.params[3];\n        message.timestamp = message.params[4];\n    },\n\n    \"353\": function (message) {\n        // :<server> 353 <me> <sigil> <channel> :<nicknames>\n        // <nickname> := ModeChar <> NickName\n        // The replyname really doesn\"t have an \"E\" in it.\n        // The sigil is either an `=` or `@`.\n        // Not sure there's any meaning behind it.\n        message.replyname = \"RPL_NAMREPLY\";\n        message.channel = message.params[2].toLowerCase();\n        message.nicknames = message.params[3].trim().split(\" \");\n    },\n\n    \"366\": function (message) {\n        // :<server> 366 <me> <channel> :End of /NAMES list.\n        message.replyname = \"RPL_ENDOFNAMES\";\n        message.channel = message.params[1].toLowerCase();\n    },\n\n    \"367\": function (message) {\n        // :<server> 367 <me> <channel> <hostmaskPattern> <setter> <timestamp>\n        message.replyname = \"RPL_BANLIST\";\n        message.channel = message.params[1];\n        message.hostmaskPattern = message.params[2];\n        message.setter = message.params[3];\n        message.timestamp = message.params[4];\n    },\n\n    \"378\": function (message) {\n        // :<server> 378 <me> <nickname> :is connecting from <hostmask> <ip>\n        message.replyname = \"RPL_WHOISHOST\";\n        message.nickname = message.params[1];\n        var words = message.params[2].split(\" \");\n        message.hostmask = words[3];\n        message.ip = words[4];\n    },\n\n    \"401\": function (message) {\n        // :<server> 401 <me> <nick> :No such nick/channel\n        message.replyname= \"ERR_NOSUCHNICK\";\n        message.nickname = message.params[1];\n    },\n\n    \"403\": function (message) {\n        // :<server> 403 <me> <channel> :<reason>\n        message.replyname = \"ERR_NOSUCHCHANNEL\";\n        message.channel = message.params[1].toLowerCase();\n    },\n\n    \"405\": function (message) {\n        // :<server> 405 <me> <channel> :<reason>\n        message.replyname = \"ERR_TOOMANYCHANNELS\";\n        message.channel = message.params[1].toLowerCase();\n    },\n\n    \"421\": function (message) {\n        // :<server> 421 <me> <command> :Unknown command\n        message.replyname = \"ERR_UNKNOWNCOMMAND\";\n        message.unknownCommand = message.params[1].toLowerCase();\n    },\n\n    \"437\": function (message) {\n        // :<server> 437 <me> <target> :Nick/channel is temporarily unavailable\n        message.replyname = \"ERR_UNAVAILRESOURCE\";\n\n        // TODO: Determine whether resource is channel or nickname.\n        message.channel = message.params[1].toLowerCase();\n        message.nickname = message.params[1];\n        message.resource = message.params[1];\n    },\n\n    \"461\": function (message) {\n        // :<server> 461 <me> <command> :Not enough parameters\n        message.replyname = \"ERR_NEEDMOREPARAMS\";\n        message.command = message.params[1];\n    },\n\n    \"471\": function (message) {\n        // :server> 471 <me> <channel> :Cannot join channel (+l)\n        message.replyname = \"ERR_CHANNELISFULL\";\n        message.channel = message.params[1].toLowerCase();\n    },\n\n    \"473\": function (message) {\n        // :server 473 <me> <channel> :Cannot join channel (+i)\n        message.replyname = \"ERR_INVITEONLYCHAN\";\n        message.channel = message.params[1].toLowerCase();\n    },\n\n    \"474\": function (message) {\n        // :<server> 474 <me> <channel> :Cannot join channel (+b)\n        message.replyname = \"ERR_BANNEDFROMCHAN\";\n        message.channel = message.params[1].toLowerCase();\n    },\n\n    \"475\": function (message) {\n        // :server> 475 <me> <channel> :reason\n        message.replyname = \"ERR_BADCHANNELKEY\";\n        message.channel = message.params[1].toLowerCase();\n    },\n\n    \"477\": function (message) {\n        // :server> 477 <me> <channel> :You need a registered nick to join that channel.\n        message.replyname = \"ERR_NEEDREGGEDNICK\";\n        message.channel = message.params[1].toLowerCase();\n    },\n\n    \"489\": function (message) {\n        // :<server> 489 <me> <channel> :Cannot join channel (SSL is required)\n        message.replyname = \"ERR_SECUREONLYCHAN\";\n        message.channel = message.params[1].toLowerCase();\n    },\n\n    \"520\": function (message) {\n        // :server 520 <me> :Cannot join channel <channel> (IRCops only)\n        // :server 520 <me> <channel> :<reason>\n        message.replyname = \"ERR_OPERONLY\";\n\n        if (message.params.length === 2) {\n            // UnrealIRCd being stupid.\n            message.channel = message.params[1].split(\" \")[3].toLowerCase();\n        } else {\n            message.channel = message.params[1].toLowerCase();\n        }\n    },\n\n    \"671\": function (message) {\n        // :<server> 671 <me> <nickname> :is using a secure connection\n        message.replyname = \"RPL_WHOISSECURE\"\n    }\n};\n\nvar Message = function (raw) {\n    var message = Object.create(new RFCMessage(raw));\n\n    message.command = message.command.toLowerCase();\n\n    // message.hostmask is either null or an object with\n    // nickname, username, hostname properties.\n    message.hostmask = message.parseHostmaskFromPrefix();\n    message.nickname = message.hostmask && message.hostmask.nickname;\n\n    if (extensions[message.command]) {\n        extensions[message.command](message);\n    }\n\n    return message;\n};\n\nMessage.extensions = extensions;\n\nmodule.exports = Message;"],"sourceRoot":"/source/"}